@page "/"
@using ClienteBlogWASM.Modelos;
@using ClienteBlogWASM.Servicios.IServicio
@inject IPostsServicio postsServicio
@inject IJSRuntime JsRuntime

<PageTitle>Home</PageTitle>
<h1 class="text-center">Últimos posts publicados</h1>

<div class="row">
	@foreach(var post in Posts)
	{
		<div class="col-3 mt-3">
			<div class="card">
				<div class="card-header">
					<h3 class="text-center">@post.Titulo</h3>
				</div>
				<div class="card-body"> 
					@if (!string.IsNullOrEmpty(post.RutaImagen))
					{
						<img src="@($"http://localhost:5269{post.RutaImagen}")" class="img-fluid rounded" width="100px" alt="@post.Titulo" />
					}
					else
					{
						<span class="badge bg-secondary">Sin imagen</span>
					}
				</div>
				<div class="card-footer">
					<NavLink href=@($"detalle-post/{post.Id}")> Más información...</NavLink>
				</div>
			</div>
		</div>
	}
</div>

@code {
	private IEnumerable<Post> Posts { get; set; } = new List<Post>();
	
	protected override async Task OnInitializedAsync()
	{
		Posts = await postsServicio.GetPosts();
	}
}